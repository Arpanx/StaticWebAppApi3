<!DOCTYPE html>

<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Vanilla JavaScript App</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>
    
    <body>
      <main>
        <h1>Vanilla JavaScript App</h1>
        <p>Loading content from the API: <b id="name">...</b></p>
      </main>


      
        <!-- <form action="http://127.0.0.1:5500/api/HttpTriggerCSharp1" met1hod="post" enctype="multipart/form-data" >
        <form action="https://witty-beach-0edda7d03.azurestaticapps.net/api/HttpTriggerCSharp1" method="post" enctype="multipart/form-data" > 
            <label for="file_photo">Photo:</label>
            <input type="file" name="file_photo" id="file_photo" multiple><br>
            <input id="upload" type="submit" value="Upload">
        </form> -->
        

        <input type="file" name="file_photo" id="file_photo" multiple><br>
        <input id="upload" type="submit" value="Upload">

        <script>
          // (async function() {
          //   let { text } = await( await fetch(`/api/message`)).json();
          //   document.querySelector('#name').textContent = text;
          // }())
          
        $('#upload').on('click', function(){    
        var data = new FormData();
        data.append('input_file_name', $('#file_photo').prop('files')[0]);
        // append other variables to data if you want: data.append('field_name_x', field_value_x);
    
        $.ajax({
            type: 'POST',
            processData: false, // important
            contentType: false, // important
            data: data,
            url: 'http://localhost:7071/api/HttpTriggerCSharp1',
            dataType : 'json',  
            // in PHP you can call and process file in the same way as if it was submitted from a form:
            // $_FILES['input_file_name']
            success: function(jsonData){
             console.log(jsonData)
            }            
        }); 
    });
        </script>

    </body>

</html>


